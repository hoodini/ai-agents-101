const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BajUZiWW.js","assets/toUtf8.browser-CyauOOnS.js"])))=>i.map(i=>d[i]);
import{f as xt,t as Nt,c as Dt,_ as Ut,e as L,g as G,n as $,i as _e,h as le,S as Lt}from"./index-BRAONsaH.js";const Ht=(t,e,r)=>{let s,n,i,a=!1;const o=async()=>{n||(n=t());try{s=await n,i=!0,a=!1}finally{n=void 0}return s};return async c=>((!i||c?.forceRefresh)&&(s=await o()),s)};var z;(function(t){t.HTTP="http",t.HTTPS="https"})(z||(z={}));var Q;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(Q||(Q={}));const he="__smithy_context",O=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const s of e)r.push(s);return r},C=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,K=()=>{let t=[],e=[],r=!1;const s=new Set,n=u=>u.sort((l,h)=>Me[h.step]-Me[l.step]||xe[h.priority||"normal"]-xe[l.priority||"normal"]),i=u=>{let l=!1;const h=p=>{const g=O(p.name,p.aliases);if(g.includes(u)){l=!0;for(const m of g)s.delete(m);return!1}return!0};return t=t.filter(h),e=e.filter(h),l},a=u=>{let l=!1;const h=p=>{if(p.middleware===u){l=!0;for(const g of O(p.name,p.aliases))s.delete(g);return!1}return!0};return t=t.filter(h),e=e.filter(h),l},o=u=>(t.forEach(l=>{u.add(l.middleware,{...l})}),e.forEach(l=>{u.addRelativeTo(l.middleware,{...l})}),u.identifyOnResolve?.(f.identifyOnResolve()),u),c=u=>{const l=[];return u.before.forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...c(h))}),l.push(u),u.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?l.push(h):l.push(...c(h))}),l},d=(u=!1)=>{const l=[],h=[],p={};return t.forEach(m=>{const y={...m,before:[],after:[]};for(const w of O(y.name,y.aliases))p[w]=y;l.push(y)}),e.forEach(m=>{const y={...m,before:[],after:[]};for(const w of O(y.name,y.aliases))p[w]=y;h.push(y)}),h.forEach(m=>{if(m.toMiddleware){const y=p[m.toMiddleware];if(y===void 0){if(u)return;throw new Error(`${m.toMiddleware} is not found when adding ${C(m.name,m.aliases)} middleware ${m.relation} ${m.toMiddleware}`)}m.relation==="after"&&y.after.push(m),m.relation==="before"&&y.before.push(m)}}),n(l).map(c).reduce((m,y)=>(m.push(...y),m),[])},f={add:(u,l={})=>{const{name:h,override:p,aliases:g}=l,m={step:"initialize",priority:"normal",middleware:u,...l},y=O(h,g);if(y.length>0){if(y.some(w=>s.has(w))){if(!p)throw new Error(`Duplicate middleware name '${C(h,g)}'`);for(const w of y){const T=t.findIndex(x=>x.name===w||x.aliases?.some(Z=>Z===w));if(T===-1)continue;const E=t[T];if(E.step!==m.step||m.priority!==E.priority)throw new Error(`"${C(E.name,E.aliases)}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by "${C(h,g)}" middleware with ${m.priority} priority in ${m.step} step.`);t.splice(T,1)}}for(const w of y)s.add(w)}t.push(m)},addRelativeTo:(u,l)=>{const{name:h,override:p,aliases:g}=l,m={middleware:u,...l},y=O(h,g);if(y.length>0){if(y.some(w=>s.has(w))){if(!p)throw new Error(`Duplicate middleware name '${C(h,g)}'`);for(const w of y){const T=e.findIndex(x=>x.name===w||x.aliases?.some(Z=>Z===w));if(T===-1)continue;const E=e[T];if(E.toMiddleware!==m.toMiddleware||E.relation!==m.relation)throw new Error(`"${C(E.name,E.aliases)}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by "${C(h,g)}" middleware ${m.relation} "${m.toMiddleware}" middleware.`);e.splice(T,1)}}for(const w of y)s.add(w)}e.push(m)},clone:()=>o(K()),use:u=>{u.applyToStack(f)},remove:u=>typeof u=="string"?i(u):a(u),removeByTag:u=>{let l=!1;const h=p=>{const{tags:g,name:m,aliases:y}=p;if(g&&g.includes(u)){const w=O(m,y);for(const T of w)s.delete(T);return l=!0,!1}return!0};return t=t.filter(h),e=e.filter(h),l},concat:u=>{const l=o(K());return l.use(u),l.identifyOnResolve(r||l.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),l},applyToStack:o,identify:()=>d(!0).map(u=>{const l=u.step??u.relation+" "+u.toMiddleware;return C(u.name,u.aliases)+" - "+l}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,l)=>{for(const h of d().map(p=>p.middleware).reverse())u=h(u,l);return r&&console.log(f.identify()),u}};return f},Me={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},xe={high:3,normal:2,low:1};class Fn{config;middlewareStack=K();initConfig;handlers;constructor(e){this.config=e;const{protocol:r,protocolSettings:s}=e;s&&typeof r=="function"&&(e.protocol=new r(s))}send(e,r,s){const n=typeof r!="function"?r:void 0,i=typeof r=="function"?r:s,a=n===void 0&&this.config.cacheMiddleware===!0;let o;if(a){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(e.constructor)?o=c.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,n),c.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,n);if(i)o(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return o(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const zt=t=>new TextEncoder().encode(t);class k extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?k.mutate(xt(e)):k.mutate(zt(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,k.prototype),e}transformToString(e="utf-8"){return e==="base64"?Nt(this):Dt(this)}}const Ne=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return k.mutate(t);if(!t)return k.mutate(new Uint8Array);const r=e.streamCollector(t);return k.mutate(await r)},ee=t=>typeof t=="function"?t():t;let Ce=class fe{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new fe({...e,headers:{...e.headers}});return r.query&&(r.query=qt(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return fe.clone(this)}};function qt(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}let nt=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};const F=t=>t[he]||(t[he]={}),it=(t,e,r,s,n)=>({name:e,namespace:t,traits:r,input:s,output:n}),jt=t=>(e,r)=>async s=>{const{response:n}=await e(s),{operationSchema:i}=F(r),[,a,o,c,d,f]=i??[];try{const u=await t.protocol.deserializeResponse(it(a,o,c,d,f),{...t,...r},n);return{response:n,output:u}}catch(u){if(Object.defineProperty(u,"$response",{value:n,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in u)){const l="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{u.message+=`
  `+l}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(l):r.logger?.warn?.(l)}typeof u.$responseBodyText<"u"&&u.$response&&(u.$response.body=u.$responseBodyText);try{if(nt.isInstance(n)){const{headers:h={}}=n,p=Object.entries(h);u.$metadata={httpStatusCode:n.statusCode,requestId:te(/^x-[\w-]+-request-?id$/,p),extendedRequestId:te(/^x-[\w-]+-id-2$/,p),cfId:te(/^x-[\w-]+-cf-id$/,p)}}}catch{}}throw u}},te=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],Ft=t=>(e,r)=>async s=>{const{operationSchema:n}=F(r),[,i,a,o,c,d]=n??[],f=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,u=await t.protocol.serializeRequest(it(i,a,o,c,d),s.input,{...t,...r,endpoint:f});return e({...s,request:u})},Bt={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Vt={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Vn(t){return{applyToStack:e=>{e.add(Ft(t),Vt),e.add(jt(t),Bt),t.protocol.setSerdeContext(t)}}}function D(t){if(typeof t=="object")return t;t=t|0;const e={};let r=0;for(const s of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[s]=1);return e}class b{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=b.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;const s=[];let n=e,i=e;for(this._isMemberSchema=!1;re(n);)s.push(n[1]),n=n[0],i=ee(n),this._isMemberSchema=!0;if(s.length>0){this.memberTraits={};for(let a=s.length-1;a>=0;--a){const o=s[a];Object.assign(this.memberTraits,D(o))}}else this.memberTraits=0;if(i instanceof b){const a=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},a,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=ee(i),Gt(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){const r=ee(e);if(r instanceof b)return r;if(re(r)){const[s,n]=r;if(s instanceof b)return Object.assign(s.getMergedTraits(),D(n)),s;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new b(r)}getSchema(){const e=this.schema;return e[0]===0?e[4]:e}getName(e=!1){const{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const r=this.getSchema()[0];return r===3||r===-3||r===4}isUnionSchema(){return this.getSchema()[0]===4}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){const e=i=>(i&4)===4||!!i?.idempotencyToken,{normalizedTraits:r,traits:s,memberTraits:n}=this;return e(r)||e(s)||e(n)}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return D(this.memberTraits)}getOwnTraits(){return D(this.traits)}getKeySchema(){const[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const s=this.getSchema(),n=e?15:s[4]??0;return N([n,0],"key")}getValueSchema(){const e=this.getSchema(),[r,s,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(s||n)?e[3+e[0]]:r?15:void 0;if(i!=null)return N([i,0],s?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){const s=r[4].indexOf(e),n=r[5][s];return N(re(n)?n:[n,0],e)}if(this.isDocumentSchema())return N([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[r,s]of this.structIterator())e[r]=s}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema();for(let r=0;r<e[4].length;++r)yield[e[4][r],N([e[5][r],0],e[4][r])]}}function N(t,e){if(t instanceof b)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const r=b;return new r(t,e)}const re=t=>Array.isArray(t)&&t.length===2,Gt=t=>Array.isArray(t)&&t.length>=5;class A{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,s=new Map){this.namespace=e,this.schemas=r,this.exceptions=s}static for(e){return A.registries.has(e)||A.registries.set(e,new A(e)),A.registries.get(e)}register(e,r){const s=this.normalizeShapeId(e);A.for(s.split("#")[0]).schemas.set(s,r)}getSchema(e){const r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){const s=e,n=A.for(s[1]);n.schemas.set(s[1]+"#"+s[2],s),n.exceptions.set(s,r)}getErrorCtor(e){const r=e;return A.for(r[1]).exceptions.get(r)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,r,s]=e,n=r+"#"+s;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const De=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),S=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),Wt=()=>{if(De)return De();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,S[t[0]]+S[t[1]]+S[t[2]]+S[t[3]]+"-"+S[t[4]]+S[t[5]]+"-"+S[t[6]]+S[t[7]]+"-"+S[t[8]]+S[t[9]]+"-"+S[t[10]]+S[t[11]]+S[t[12]]+S[t[13]]+S[t[14]]+S[t[15]]},_=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};_.from=t=>t&&typeof t=="object"&&(t instanceof _||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?_(String(t)):_(JSON.stringify(t));_.fromObject=_.from;const Ue=/^-?\d*(\.\d+)?$/;class at{string;type;constructor(e,r){if(this.string=e,this.type=r,!Ue.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const r=e;return at.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&Ue.test(r.string)}}class Qt{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Kt extends Qt{options;constructor(e){super(),this.options=e}getRequestType(){return Ce}getResponseType(){return nt}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(const[s,n]of r.url.searchParams.entries())e.query[s]=n;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,s){const n=b.of(r.input),i=D(r.traits??{});if(i.endpoint){let a=i.endpoint?.[0];if(typeof a=="string"){const o=[...n.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(const[c]of o){const d=s[c];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);a=a.replace(`{${c}}`,d)}e.hostname=a+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:s})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:s})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await Ut(async()=>{const{EventStreamSerde:r}=await import("./index-BajUZiWW.js");return{EventStreamSerde:r}},__vite__mapDeps([0,1]));return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,s,n,i){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Gn extends Kt{async serializeRequest(e,r,s){const n=this.serializer,i={},a={},o=await s.endpoint(),c=b.of(e?.input),d=c.getSchema();let f;const u=new Ce({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:i,headers:a,body:void 0});o&&(this.updateServiceEndpoint(u,o),this.setHostPrefix(u,e,r));const l={...r};if(r){const h=c.getEventStreamMember();if(h){if(l[h]){const p={};for(const[g,m]of c.structIterator())g!==h&&l[g]&&(n.write(m,l[g]),p[g]=n.flush());f=await this.serializeEventStream({eventStream:l[h],requestSchema:c,initialRequest:p})}}else n.write(d,l),f=n.flush()}return u.headers=a,u.query=i,u.body=f,u.method="POST",u}async deserializeResponse(e,r,s){const n=this.deserializer,i=b.of(e.output),a={};if(s.statusCode>=300){const c=await Ne(s.body,r);throw c.byteLength>0&&Object.assign(a,await n.read(15,c)),await this.handleError(e,r,s,a,this.deserializeMetadata(s)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(const c in s.headers){const d=s.headers[c];delete s.headers[c],s.headers[c.toLowerCase()]=d}const o=i.getEventStreamMember();if(o)a[o]=await this.deserializeEventStream({response:s,responseSchema:i,initialResponseContainer:a});else{const c=await Ne(s.body,r);c.byteLength>0&&Object.assign(a,await n.read(i,c))}return a.$metadata=this.deserializeMetadata(s),a}}function Wn(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:r,httpPrefixHeaders:s,httpHeader:n,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof s=="string"||n?6:i||r?5:void 0:void 0)??e.timestampFormat.default}const se="***SensitiveInformation***";function me(t,e){if(e==null)return e;const r=b.of(t);if(r.getMergedTraits().sensitive)return se;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return se}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return se}else if(r.isStructSchema()&&typeof e=="object"){const s=e,n={};for(const[i,a]of r.structIterator())s[i]!=null&&(n[i]=me(a,s[i]));return n}return e}class Xt{middlewareStack=K();schema;static classBuilder(){return new Yt}resolveMiddlewareWithContext(e,r,s,{middlewareFn:n,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:f,CommandCtor:u}){for(const m of n.bind(this)(u,e,r,s))this.middlewareStack.use(m);const l=e.concat(this.middlewareStack),{logger:h}=r,p={logger:h,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:c,[he]:{commandInstance:this,...d},...f},{requestHandler:g}=r;return l.resolve(m=>g.handle(m.request,s||{}),p)}}class Yt{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,s={}){return this._smithyContext={service:e,operation:r,...s},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=s=>s,r=s=>s){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends Xt{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[s]){super(),this.input=s??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(s,n,i){const a=e._operationSchema,o=a?.[4]??a?.input,c=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(s,n,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?me.bind(null,o):d=>d),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?me.bind(null,c):d=>d),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class U extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return U.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===U?U.isInstance(e):U.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const Le=(t,e={})=>{Object.entries(e).filter(([,s])=>s!==void 0).forEach(([s,n])=>{(t[s]==null||t[s]==="")&&(t[s]=n)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},Qn=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Jt=t=>{const e=[];for(const r in Q){const s=Q[r];t[s]!==void 0&&e.push({algorithmId:()=>s,checksumConstructor:()=>t[s]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Zt=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},er=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),tr=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Kn=t=>Object.assign(Jt(t),er(t)),Xn=t=>Object.assign(Zt(t),tr(t));class rr{trace(){}debug(){}info(){}warn(){}error(){}}const sr=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const s of e)for(const n of t)n.schemeId.split("#")[1]===s&&r.push(n);for(const s of t)r.find(({schemeId:n})=>n===s.schemeId)||r.push(s);return r};function nr(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const ir=(t,e)=>(r,s)=>async n=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,s,n.input)),a=t.authSchemePreference?await t.authSchemePreference():[],o=sr(i,a),c=nr(t.httpAuthSchemes),d=F(s),f=[];for(const u of o){const l=c.get(u.schemeId);if(!l){f.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}const h=l.identityProvider(await e.identityProviderConfigProvider(t));if(!h){f.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:p={},signingProperties:g={}}=u.propertiesExtractor?.(t,s)||{};u.identityProperties=Object.assign(u.identityProperties||{},p),u.signingProperties=Object.assign(u.signingProperties||{},g),d.selectedHttpAuthScheme={httpAuthOption:u,identity:await h(u.identityProperties),signer:l.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(f.join(`
`));return r(n)},ar={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},Yn=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:s=>{s.addRelativeTo(ir(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),ar)}}),or={name:"serializerMiddleware"},cr=t=>e=>{throw e},ur=(t,e)=>{},dr=t=>(e,r)=>async s=>{if(!Ce.isInstance(s.request))return e(s);const i=F(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:a={}},identity:o,signer:c}=i,d=await e({...s,request:await c.sign(s.request,o,a)}).catch((c.errorHandler||cr)(a));return(c.successHandler||ur)(d.response,a),d},lr={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},Jn=t=>({applyToStack:e=>{e.addRelativeTo(dr(),lr)}});function hr(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class Zn{authSchemes=new Map;constructor(e){for(const[r,s]of Object.entries(e))s!==void 0&&this.authSchemes.set(r,s)}getIdentityProvider(e){return this.authSchemes.get(e)}}class ei{async sign(e,r,s){return e}}const fr=t=>function(r){return ot(r)&&r.expiration.getTime()-Date.now()<t},mr=3e5,pr=fr(mr),ot=t=>t.expiration!==void 0,gr=(t,e,r)=>{if(t===void 0)return;const s=typeof t!="function"?async()=>Promise.resolve(t):t;let n,i,a,o=!1;const c=async d=>{i||(i=s(d));try{n=await i,a=!0,o=!1}finally{i=void 0}return n};return e===void 0?async d=>((!a||d?.forceRefresh)&&(n=await c(d)),n):async d=>((!a||d?.forceRefresh)&&(n=await c(d)),o?n:r(n)?(e(n)&&await c(d),n):(o=!0,n))};let yr=class pe{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new pe({...e,headers:{...e.headers}});return r.query&&(r.query=wr(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return pe.clone(this)}};function wr(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}function ti(t){return t}const Sr=t=>e=>async r=>{if(!yr.isInstance(r.request))return e(r);const{request:s}=r,{handlerProtocol:n=""}=t.requestHandler.metadata||{};if(n.indexOf("h2")>=0&&!s.headers[":authority"])delete s.headers.host,s.headers[":authority"]=s.hostname+(s.port?":"+s.port:"");else if(!s.headers.host){let i=s.hostname;s.port!=null&&(i+=`:${s.port}`),s.headers.host=i}return e(r)},br={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ri=t=>({applyToStack:e=>{e.add(Sr(t),br)}}),Er=()=>(t,e)=>async r=>{try{const s=await t(r),{clientName:n,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=e,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=o,f=c??e.inputFilterSensitiveLog,u=d??e.outputFilterSensitiveLog,{$metadata:l,...h}=s.output;return a?.info?.({clientName:n,commandName:i,input:f(r.input),output:u(h),metadata:l}),s}catch(s){const{clientName:n,commandName:i,logger:a,dynamoDbDocumentClientOptions:o={}}=e,{overrideInputFilterSensitiveLog:c}=o,d=c??e.inputFilterSensitiveLog;throw a?.error?.({clientName:n,commandName:i,input:d(r.input),error:s,metadata:s.$metadata}),s}},Rr={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},si=t=>({applyToStack:e=>{e.add(Er(),Rr)}}),Tr={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},vr=()=>t=>async e=>t(e),ni=t=>({applyToStack:e=>{e.add(vr(),Tr)}}),Ar=void 0;function Cr(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function ii(t){const e=L(t.userAgentAppId??Ar),{customUserAgent:r}=t;return Object.assign(t,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:async()=>{const s=await e();if(!Cr(s)){const n=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof s!="string"?n?.warn("userAgentAppId must be a string or undefined."):s.length>50&&n?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return s}})}class ai{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const s=this.hash(e);if(s===!1)return r();if(!this.data.has(s)){if(this.data.size>this.capacity+10){const n=this.data.keys();let i=0;for(;;){const{value:a,done:o}=n.next();if(this.data.delete(a),o||++i>10)break}}this.data.set(s,r())}return this.data.get(s)}size(){return this.data.size}hash(e){let r="";const{parameters:s}=this;if(s.length===0)return!1;for(const n of s){const i=String(e[n]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const Ir=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),ct=t=>Ir.test(t)||t.startsWith("[")&&t.endsWith("]"),Or=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Y=(t,e=!1)=>{if(!e)return Or.test(t);const r=t.split(".");for(const s of r)if(!Y(s))return!1;return!0},ge={},q="endpoints";function I(t){return typeof t!="object"||t==null?t:"ref"in t?`$${I(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(I).join(", ")})`:JSON.stringify(t,null,2)}class R extends Error{constructor(e){super(e),this.name="EndpointError"}}const $r=(t,e)=>t===e,kr=t=>{const e=t.split("."),r=[];for(const s of e){const n=s.indexOf("[");if(n!==-1){if(s.indexOf("]")!==s.length-1)throw new R(`Path: '${t}' does not end with ']'`);const i=s.slice(n+1,-1);if(Number.isNaN(parseInt(i)))throw new R(`Invalid array index: '${i}' in path: '${t}'`);n!==0&&r.push(s.slice(0,n)),r.push(i)}else r.push(s)}return r},ut=(t,e)=>kr(e).reduce((r,s)=>{if(typeof r!="object")throw new R(`Index '${s}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(s)]:r[s]},t),Pr=t=>t!=null,_r=t=>!t,ne={[z.HTTP]:80,[z.HTTPS]:443},Mr=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:l,port:h,protocol:p="",path:g="",query:m={}}=t,y=new URL(`${p}//${l}${h?`:${h}`:""}${g}`);return y.search=Object.entries(m).map(([w,T])=>`${w}=${T}`).join("&"),y}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:s,hostname:n,pathname:i,protocol:a,search:o}=e;if(o)return null;const c=a.slice(0,-1);if(!Object.values(z).includes(c))return null;const d=ct(n),f=r.includes(`${s}:${ne[c]}`)||typeof t=="string"&&t.includes(`${s}:${ne[c]}`),u=`${s}${f?`:${ne[c]}`:""}`;return{scheme:c,authority:u,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:d}},xr=(t,e)=>t===e,Nr=(t,e,r,s)=>e>=r||t.length<r?null:s?t.substring(t.length-r,t.length-e):t.substring(e,r),Dr=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Ur={booleanEquals:$r,getAttr:ut,isSet:Pr,isValidHostLabel:Y,not:_r,parseURL:Mr,stringEquals:xr,substring:Nr,uriEncode:Dr},dt=(t,e)=>{const r=[],s={...e.endpointParams,...e.referenceRecord};let n=0;for(;n<t.length;){const i=t.indexOf("{",n);if(i===-1){r.push(t.slice(n));break}r.push(t.slice(n,i));const a=t.indexOf("}",i);if(a===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(i+1,a)),n=a+2);const o=t.substring(i+1,a);if(o.includes("#")){const[c,d]=o.split("#");r.push(ut(s[c],d))}else r.push(s[o]);n=a+1}return r.join("")},Lr=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],J=(t,e,r)=>{if(typeof t=="string")return dt(t,r);if(t.fn)return ht.callFunction(t,r);if(t.ref)return Lr(t,r);throw new R(`'${e}': ${String(t)} is not a string, function or reference.`)},lt=({fn:t,argv:e},r)=>{const s=e.map(i=>["boolean","number"].includes(typeof i)?i:ht.evaluateExpression(i,"arg",r)),n=t.split(".");return n[0]in ge&&n[1]!=null?ge[n[0]][n[1]](...s):Ur[t](...s)},ht={evaluateExpression:J,callFunction:lt},Hr=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new R(`'${t}' is already defined in Reference Record.`);const s=lt(e,r);return r.logger?.debug?.(`${q} evaluateCondition: ${I(e)} = ${I(s)}`),{result:s===""?!0:!!s,...t!=null&&{toAssign:{name:t,value:s}}}},Ie=(t=[],e)=>{const r={};for(const s of t){const{result:n,toAssign:i}=Hr(s,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!n)return{result:n};i&&(r[i.name]=i.value,e.logger?.debug?.(`${q} assign: ${i.name} := ${I(i.value)}`))}return{result:!0,referenceRecord:r}},zr=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:n.map(i=>{const a=J(i,"Header value entry",e);if(typeof a!="string")throw new R(`Header '${s}' value '${a}' is not a string`);return a})}),{}),ft=(t,e)=>Object.entries(t).reduce((r,[s,n])=>({...r,[s]:pt.getEndpointProperty(n,e)}),{}),mt=(t,e)=>{if(Array.isArray(t))return t.map(r=>mt(r,e));switch(typeof t){case"string":return dt(t,e);case"object":if(t===null)throw new R(`Unexpected endpoint property: ${t}`);return pt.getEndpointProperties(t,e);case"boolean":return t;default:throw new R(`Unexpected endpoint property type: ${typeof t}`)}},pt={getEndpointProperty:mt,getEndpointProperties:ft},qr=(t,e)=>{const r=J(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(s){throw console.error(`Failed to construct URL with ${r}`,s),s}throw new R(`Endpoint URL must be a string, got ${typeof r}`)},jr=(t,e)=>{const{conditions:r,endpoint:s}=t,{result:n,referenceRecord:i}=Ie(r,e);if(!n)return;const a={...e,referenceRecord:{...e.referenceRecord,...i}},{url:o,properties:c,headers:d}=s;return e.logger?.debug?.(`${q} Resolving endpoint from template: ${I(s)}`),{...d!=null&&{headers:zr(d,a)},...c!=null&&{properties:ft(c,a)},url:qr(o,a)}},Fr=(t,e)=>{const{conditions:r,error:s}=t,{result:n,referenceRecord:i}=Ie(r,e);if(n)throw new R(J(s,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},gt=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const s=jr(r,e);if(s)return s}else if(r.type==="error")Fr(r,e);else if(r.type==="tree"){const s=yt.evaluateTreeRule(r,e);if(s)return s}else throw new R(`Unknown endpoint rule: ${r}`);throw new R("Rules evaluation failed")},Br=(t,e)=>{const{conditions:r,rules:s}=t,{result:n,referenceRecord:i}=Ie(r,e);if(n)return yt.evaluateRules(s,{...e,referenceRecord:{...e.referenceRecord,...i}})},yt={evaluateRules:gt,evaluateTreeRule:Br},oi=(t,e)=>{const{endpointParams:r,logger:s}=e,{parameters:n,rules:i}=t;e.logger?.debug?.(`${q} Initial EndpointParams: ${I(r)}`);const a=Object.entries(n).filter(([,d])=>d.default!=null).map(([d,f])=>[d,f.default]);if(a.length>0)for(const[d,f]of a)r[d]=r[d]??f;const o=Object.entries(n).filter(([,d])=>d.required).map(([d])=>d);for(const d of o)if(r[d]==null)throw new R(`Missing required parameter: '${d}'`);const c=gt(i,{endpointParams:r,logger:s,referenceRecord:{}});return e.logger?.debug?.(`${q} Resolved endpoint: ${I(c)}`),c},wt=(t,e=!1)=>{if(e){for(const r of t.split("."))if(!wt(r))return!1;return!0}return!(!Y(t)||t.length<3||t.length>63||t!==t.toLowerCase()||ct(t))},He=":",Vr="/",Gr=t=>{const e=t.split(He);if(e.length<6)return null;const[r,s,n,i,a,...o]=e;if(r!=="arn"||s===""||n===""||o.join(He)==="")return null;const c=o.map(d=>d.split(Vr)).flat();return{partition:s,service:n,region:i,accountId:a,resourceId:c}},Wr=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],Qr={partitions:Wr};let Kr=Qr;const Xr=t=>{const{partitions:e}=Kr;for(const s of e){const{regions:n,outputs:i}=s;for(const[a,o]of Object.entries(n))if(a===t)return{...i,...o}}for(const s of e){const{regionRegex:n,outputs:i}=s;if(new RegExp(n).test(t))return{...i}}const r=e.find(s=>s.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Yr={isVirtualHostableS3Bucket:wt,parseArn:Gr,partition:Xr};ge.aws=Yr;function Jr(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[s,n=null]=r.split("=");s=decodeURIComponent(s),n&&(n=decodeURIComponent(n)),s in e?Array.isArray(e[s])?e[s].push(n):e[s]=[e[s],n]:e[s]=n}return e}const ye=t=>{if(typeof t=="string")return ye(new URL(t));const{hostname:e,pathname:r,port:s,protocol:n,search:i}=t;let a;return i&&(a=Jr(i)),{hostname:e,port:s?parseInt(s):void 0,protocol:n,path:r,query:a}};let Zr=class we{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new we({...e,headers:{...e.headers}});return r.query&&(r.query=es(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return we.clone(this)}};function es(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}function ts(t,e,r){return t.$source||(t.$source={}),t.$source[e]=r,t}function v(t,e,r){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=r}let Oe=class Se{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new Se({...e,headers:{...e.headers}});return r.query&&(r.query=rs(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return Se.clone(this)}};function rs(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}let ss=class{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};const ze=t=>ss.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,St=t=>new Date(Date.now()+t),ns=(t,e)=>Math.abs(St(e).getTime()-t)>=3e5,qe=(t,e)=>{const r=Date.parse(t);return ns(r,e)?r-Date.now():e},H=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},is=async t=>{const e=H("context",t.context),r=H("config",t.config),s=e.endpointV2?.properties?.authSchemes?.[0],i=await H("signer",r.signer)(s),a=t?.signingRegion,o=t?.signingRegionSet,c=t?.signingName;return{config:r,signer:i,signingRegion:a,signingRegionSet:o,signingName:c}};class ui{async sign(e,r,s){if(!Oe.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const n=await is(s),{config:i,signer:a}=n;let{signingRegion:o,signingName:c}=n;const d=s.context;if(d?.authSchemes?.length??!1){const[u,l]=d.authSchemes;u?.name==="sigv4a"&&l?.name==="sigv4"&&(o=l?.signingRegion??o,c=l?.signingName??c)}return await a.sign(e,{signingDate:St(i.systemClockOffset),signingRegion:o,signingService:c})}errorHandler(e){return r=>{const s=r.ServerTime??ze(r.$response);if(s){const n=H("config",e.config),i=n.systemClockOffset;n.systemClockOffset=qe(s,n.systemClockOffset),n.systemClockOffset!==i&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(e,r){const s=ze(e);if(s){const n=H("config",r.config);n.systemClockOffset=qe(s,n.systemClockOffset)}}}const bt={},be={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),bt[t]=e,be[e]=t}function as(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const s=t.slice(r,r+2).toLowerCase();if(s in be)e[r/2]=be[s];else throw new Error(`Cannot decode unrecognized sequence ${s} as hexadecimal`)}return e}function P(t){let e="";for(let r=0;r<t.byteLength;r++)e+=bt[t[r]];return e}const Ee=t=>new TextEncoder().encode(t),j=t=>typeof t=="string"?Ee(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),di=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)},os="X-Amz-Algorithm",cs="X-Amz-Credential",Et="X-Amz-Date",us="X-Amz-SignedHeaders",ds="X-Amz-Expires",Rt="X-Amz-Signature",Tt="X-Amz-Security-Token",vt="authorization",At=Et.toLowerCase(),ls="date",hs=[vt,At,ls],fs=Rt.toLowerCase(),Re="x-amz-content-sha256",ms=Tt.toLowerCase(),ps={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},gs=/^proxy-/,ys=/^sec-/,ie="AWS4-HMAC-SHA256",ws="AWS4-HMAC-SHA256-PAYLOAD",Ss="UNSIGNED-PAYLOAD",bs=50,Ct="aws4_request",Es=3600*24*7,B={},ae=[],oe=(t,e,r)=>`${t}/${e}/${r}/${Ct}`,Rs=async(t,e,r,s,n)=>{const i=await je(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${s}:${n}:${P(i)}:${e.sessionToken}`;if(a in B)return B[a];for(ae.push(a);ae.length>bs;)delete B[ae.shift()];let o=`AWS4${e.secretAccessKey}`;for(const c of[r,s,n,Ct])o=await je(t,o,c);return B[a]=o},je=(t,e,r)=>{const s=new t(e);return s.update(j(r)),s.digest()},Fe=({headers:t},e,r)=>{const s={};for(const n of Object.keys(t).sort()){if(t[n]==null)continue;const i=n.toLowerCase();(i in ps||e?.has(i)||gs.test(i)||ys.test(i))&&(!r||r&&!r.has(i))||(s[i]=t[n].trim().replace(/\s+/g," "))}return s},Ts=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",ce=async({headers:t,body:e},r)=>{for(const s of Object.keys(t))if(s.toLowerCase()===Re)return t[s];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||Ts(e)){const s=new r;return s.update(j(e)),P(await s.digest())}return Ss};class vs{format(e){const r=[];for(const i of Object.keys(e)){const a=Ee(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}const s=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0));let n=0;for(const i of r)s.set(i,n),n+=i.byteLength;return s}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const s=new DataView(new ArrayBuffer(5));return s.setUint8(0,4),s.setInt32(1,e.value,!1),new Uint8Array(s.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":const o=Ee(e.value),c=new DataView(new ArrayBuffer(3+o.byteLength));c.setUint8(0,7),c.setUint16(1,o.byteLength,!1);const d=new Uint8Array(c.buffer);return d.set(o,3),d;case"timestamp":const f=new Uint8Array(9);return f[0]=8,f.set($e.fromNumber(e.value.valueOf()).bytes,1),f;case"uuid":if(!As.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const u=new Uint8Array(17);return u[0]=9,u.set(as(e.value.replace(/\-/g,"")),1),u}}}var Be;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Be||(Be={}));const As=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class $e{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let s=7,n=Math.abs(Math.round(e));s>-1&&n>0;s--,n/=256)r[s]=n;return e<0&&Ve(r),new $e(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&Ve(e),parseInt(P(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function Ve(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const Cs=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},Is=(t,e={})=>{const{headers:r,query:s={}}=Oe.clone(t);for(const n of Object.keys(r)){const i=n.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(s[n]=r[n],delete r[n])}return{...t,headers:r,query:s}},Ge=t=>{t=Oe.clone(t);for(const e of Object.keys(t.headers))hs.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},Os=({query:t={}})=>{const e=[],r={};for(const s of Object.keys(t)){if(s.toLowerCase()===fs)continue;const n=G(s);e.push(n);const i=t[s];typeof i=="string"?r[n]=`${n}=${G(i)}`:Array.isArray(i)&&(r[n]=i.slice(0).reduce((a,o)=>a.concat([`${n}=${G(o)}`]),[]).sort().join("&"))}return e.sort().map(s=>r[s]).filter(s=>s).join("&")},$s=t=>ks(t).toISOString().replace(/\.\d{3}Z$/,"Z"),ks=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class Ps{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:a=!0}){this.service=n,this.sha256=i,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=$(s),this.credentialProvider=$(r)}createCanonicalRequest(e,r,s){const n=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${Os(e)}
${n.map(i=>`${i}:${r[i]}`).join(`
`)}

${n.join(";")}
${s}`}async createStringToSign(e,r,s,n){const i=new this.sha256;i.update(j(s));const a=await i.digest();return`${n}
${e}
${r}
${P(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const s=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return G(s).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=$s(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class We extends Ps{headerFormatter=new vs;constructor({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:r,region:s,service:n,sha256:i,uriEscapePath:a})}async presign(e,r={}){const{signingDate:s=new Date,expiresIn:n=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:c,signingRegion:d,signingService:f}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);const l=d??await this.regionProvider(),{longDate:h,shortDate:p}=this.formatDate(s);if(n>Es)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const g=oe(p,l,f??this.service),m=Is(Ge(e),{unhoistableHeaders:a,hoistableHeaders:c});u.sessionToken&&(m.query[Tt]=u.sessionToken),m.query[os]=ie,m.query[cs]=`${u.accessKeyId}/${g}`,m.query[Et]=h,m.query[ds]=n.toString(10);const y=Fe(m,i,o);return m.query[us]=this.getCanonicalHeaderList(y),m.query[Rt]=await this.getSignature(h,g,this.getSigningKey(u,l,p,f),this.createCanonicalRequest(m,y,await ce(e,this.sha256))),m}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:s=new Date,priorSignature:n,signingRegion:i,signingService:a}){const o=i??await this.regionProvider(),{shortDate:c,longDate:d}=this.formatDate(s),f=oe(c,o,a??this.service),u=await ce({headers:{},body:r},this.sha256),l=new this.sha256;l.update(e);const h=P(await l.digest()),p=[ws,d,f,n,h,u].join(`
`);return this.signString(p,{signingDate:s,signingRegion:o,signingService:a})}async signMessage(e,{signingDate:r=new Date,signingRegion:s,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:s,signingService:n,priorSignature:e.priorSignature}).then(a=>({message:e.message,signature:a}))}async signString(e,{signingDate:r=new Date,signingRegion:s,signingService:n}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const a=s??await this.regionProvider(),{shortDate:o}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,a,o,n));return c.update(j(e)),P(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:s,unsignableHeaders:n,signingRegion:i,signingService:a}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const c=i??await this.regionProvider(),d=Ge(e),{longDate:f,shortDate:u}=this.formatDate(r),l=oe(u,c,a??this.service);d.headers[At]=f,o.sessionToken&&(d.headers[ms]=o.sessionToken);const h=await ce(d,this.sha256);!Cs(Re,d.headers)&&this.applyChecksum&&(d.headers[Re]=h);const p=Fe(d,n,s),g=await this.getSignature(f,l,this.getSigningKey(o,c,u,a),this.createCanonicalRequest(d,p,h));return d.headers[vt]=`${ie} Credential=${o.accessKeyId}/${l}, SignedHeaders=${this.getCanonicalHeaderList(p)}, Signature=${g}`,d}async getSignature(e,r,s,n){const i=await this.createStringToSign(e,r,n,ie),a=new this.sha256(await s);return a.update(j(i)),P(await a.digest())}getSigningKey(e,r,s,n){return Rs(this.sha256,e,s,r,n||this.service)}}const li=t=>{let e=t.credentials,r=!!t.credentials,s;Object.defineProperty(t,"credentials",{set(d){d&&d!==e&&d!==s&&(r=!0),e=d;const f=_s(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),u=Ms(t,f);r&&!u.attributed?(s=async l=>u(l).then(h=>ts(h,"CREDENTIALS_CODE","e")),s.memoized=u.memoized,s.configBound=u.configBound,s.attributed=!0):s=u},get(){return s},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:n=!0,systemClockOffset:i=t.systemClockOffset||0,sha256:a}=t;let o;return t.signer?o=L(t.signer):t.regionInfoProvider?o=()=>L(t.region)().then(async d=>[await t.regionInfoProvider(d,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},d]).then(([d,f])=>{const{signingRegion:u,signingService:l}=d;t.signingRegion=t.signingRegion||u||f,t.signingName=t.signingName||l||t.serviceId;const h={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:a,uriEscapePath:n},p=t.signerConstructor||We;return new p(h)}):o=async d=>{d=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await L(t.region)(),properties:{}},d);const f=d.signingRegion,u=d.signingName;t.signingRegion=t.signingRegion||f,t.signingName=t.signingName||u||t.serviceId;const l={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:a,uriEscapePath:n},h=t.signerConstructor||We;return new h(l)},Object.assign(t,{systemClockOffset:i,signingEscapePath:n,signer:o})};function _s(t,{credentials:e,credentialDefaultProvider:r}){let s;return e?e?.memoized?s=e:s=gr(e,pr,ot):r?s=L(r(Object.assign({},t,{parentClientConfig:t}))):s=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},s.memoized=!0,s}function Ms(t,e){if(e.configBound)return e;const r=async s=>e({...s,callerClientConfig:t});return r.memoized=e.memoized,r.configBound=!0,r}const Qe=typeof TextEncoder=="function"?new TextEncoder:null,hi=t=>{if(typeof t=="string"){if(Qe)return Qe.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const s=t.charCodeAt(r);s>127&&s<=2047?e++:s>2047&&s<=65535&&(e+=2),s>=56320&&s<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)};class fi{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,r){const s=r.getMemberSchemas(),n=Object.values(s).find(i=>!!i.getMergedTraits().httpPayload);if(n){const i=n.getMergedTraits().mediaType;return i||(n.isStringSchema()?"text/plain":n.isBlobSchema()?"application/octet-stream":e)}else if(!r.isUnitSchema()&&Object.values(s).find(a=>{const{httpQuery:o,httpQueryParams:c,httpHeader:d,httpLabel:f,httpPrefixHeaders:u}=a.getMergedTraits();return!o&&!c&&!d&&!f&&u===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,r,s,n,i,a){let o=r,c=e;e.includes("#")&&([o,c]=e.split("#"));const d={$metadata:i,$fault:s.statusCode<500?"client":"server"},f=A.for(o);try{return{errorSchema:a?.(f,c)??f.getSchema(e),errorMetadata:d}}catch{n.message=n.message??n.Message??"UnknownError";const l=A.for("smithy.ts.sdk.synthetic."+o),h=l.getBaseException();if(h){const p=l.getErrorCtor(h)??Error;throw this.decorateServiceException(Object.assign(new p({name:c}),d),n)}throw this.decorateServiceException(Object.assign(new Error(c),d),n)}}decorateServiceException(e,r={}){if(this.queryCompat){const s=e.Message??r.Message,n=Le(e,r);s&&(n.message=s),n.Error={...n.Error,Type:n.Error.Type,Code:n.Error.Code,Message:n.Error.message??n.Error.Message??s};const i=n.$metadata.requestId;return i&&(n.RequestId=i),n}return Le(e,r)}setQueryCompatError(e,r){const s=r.headers?.["x-amzn-query-error"];if(e!==void 0&&s!=null){const[n,i]=s.split(";"),a=Object.entries(e),o={Code:n,Type:i};Object.assign(e,o);for(const[c,d]of a)o[c==="message"?"Message":c]=d;delete o.__type,e.Error=o}}queryCompatOutput(e,r){e.Error&&(r.Error=e.Error),e.Type&&(r.Type=e.Type),e.Code&&(r.Code=e.Code)}findQueryCompatibleError(e,r){try{return e.getSchema(r)}catch{return e.find(n=>b.of(n).getMergedTraits().awsQueryError?.[0]===r)}}}class mi{serdeContext;setSerdeContext(e){this.serdeContext=e}}function*pi(t,e){if(t.isUnitSchema())return;const r=t.getSchema();for(let s=0;s<r[4].length;++s){const n=r[4][s],i=r[5][s],a=new b([i,0],n);!(n in e)&&!a.isIdempotencyToken()||(yield[n,a])}}function*gi(t,e,r){if(t.isUnitSchema())return;const s=t.getSchema();let n=Object.keys(e).filter(i=>i!=="__type").length;for(let i=0;i<s[4].length&&n!==0;++i){const a=s[4][i],o=s[5][i],c=new b([o,0],a);let d=a;r&&(d=c.getMergedTraits()[r]??a),d in e&&(yield[a,c],n-=1)}}class yi{from;to;keys;constructor(e,r){this.from=e,this.to=r,this.keys=new Set(Object.keys(this.from).filter(s=>s!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){const e=this.keys.values().next().value,r=this.from[e];this.to.$unknown=[e,r]}}}const xs=/\d{12}\.ddb/;async function Ns(t,e,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&v(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const i=await e.retryStrategy();typeof i.acquireInitialRetryToken=="function"?i.constructor?.name?.includes("Adaptive")?v(t,"RETRY_MODE_ADAPTIVE","F"):v(t,"RETRY_MODE_STANDARD","E"):v(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const i=t.endpointV2;switch(String(i?.url?.hostname).match(xs)&&v(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":v(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":v(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":v(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const n=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(n?.$source){const i=n;i.accountId&&v(t,"RESOLVED_ACCOUNT_ID","T");for(const[a,o]of Object.entries(i.$source??{}))v(t,a,o)}}const Ke="user-agent",ue="x-amz-user-agent",Xe=" ",de="/",Ds=/[^!$%&'*+\-.^_`|~\w]/g,Us=/[^!$%&'*+\-.^_`|~\w#]/g,Ye="-",Ls=1024;function Hs(t){let e="";for(const r in t){const s=t[r];if(e.length+s.length+1<=Ls){e.length?e+=","+s:e+=s;continue}break}return e}const zs=t=>(e,r)=>async s=>{const{request:n}=s;if(!Zr.isInstance(n))return e(s);const{headers:i}=n,a=r?.userAgent?.map(V)||[],o=(await t.defaultUserAgentProvider()).map(V);await Ns(r,t,s);const c=r;o.push(`m/${Hs(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);const d=t?.customUserAgent?.map(V)||[],f=await t.userAgentAppId();f&&o.push(V(["app",`${f}`]));const u=[].concat([...o,...a,...d]).join(Xe),l=[...o.filter(h=>h.startsWith("aws-sdk-")),...d].join(Xe);return t.runtime!=="browser"?(l&&(i[ue]=i[ue]?`${i[Ke]} ${l}`:l),i[Ke]=u):i[ue]=u,e({...s,request:n})},V=t=>{const e=t[0].split(de).map(a=>a.replace(Ds,Ye)).join(de),r=t[1]?.replace(Us,Ye),s=e.indexOf(de),n=e.substring(0,s);let i=e.substring(s+1);return n==="api"&&(i=i.toLowerCase()),[n,i,r].filter(a=>a&&a.length>0).reduce((a,o,c)=>{switch(c){case 0:return o;case 1:return`${a}/${o}`;default:return`${a}#${o}`}},"")},qs={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},wi=t=>({applyToStack:e=>{e.add(zs(t),qs)}}),Si=!1,bi=!1,Je=new Set,js=(t,e=Y)=>{if(!Je.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else Je.add(t)},It=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Fs=t=>It(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Ei=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const s=typeof e=="function"?await e():e,n=Fs(s);return js(n),n},useFipsEndpoint:async()=>{const s=typeof e=="string"?e:await e();return It(s)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})};let Bs=class Te{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new Te({...e,headers:{...e.headers}});return r.query&&(r.query=Vs(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return Te.clone(this)}};function Vs(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}const Ze="content-length";function Gs(t){return e=>async r=>{const s=r.request;if(Bs.isInstance(s)){const{body:n,headers:i}=s;if(n&&Object.keys(i).map(a=>a.toLowerCase()).indexOf(Ze)===-1)try{const a=t(n);s.headers={...s.headers,[Ze]:String(a)}}catch{}}return e({...r,request:s})}}const Ws={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Ri=t=>({applyToStack:e=>{e.add(Gs(t.bodyLengthChecker),Ws)}}),Qs=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Zs(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Js(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Ks=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Xs=/(\d+\.){3}\d+/,Ys=/\.\./,Js=t=>Ks.test(t)&&!Xs.test(t)&&!Ys.test(t),Zs=t=>{const[e,r,s,,,n]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,a=!!(i&&r&&s&&n);if(i&&!a)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return a},en=(t,e,r,s=!1)=>{const n=async()=>{let i;return s?i=r.clientContextParams?.[t]??r[t]??r[e]:i=r[t]??r[e],typeof i=="function"?i():i};return t==="credentialScope"||e==="CredentialScope"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const i=await n();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:a,hostname:o,port:c,path:d}=i;return`${a}//${o}${c?":"+c:""}${d}`}}return i}:n},Ot=async t=>{},$t=t=>typeof t=="object"?"url"in t?ye(t.url):t:ye(t),tn=async(t,e,r,s)=>{if(!r.isCustomEndpoint){let a;r.serviceConfiguredEndpoint?a=await r.serviceConfiguredEndpoint():a=await Ot(r.serviceId),a&&(r.endpoint=()=>Promise.resolve($t(a)),r.isCustomEndpoint=!0)}const n=await rn(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(n,s)},rn=async(t,e,r)=>{const s={},n=e?.getEndpointParameterInstructions?.()||{};for(const[i,a]of Object.entries(n))switch(a.type){case"staticContextParams":s[i]=a.value;break;case"contextParams":s[i]=t[a.name];break;case"clientContextParams":case"builtInParams":s[i]=await en(a.name,i,r,a.type!=="builtInParams")();break;case"operationContextParams":s[i]=a.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(n).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await Qs(s),s},sn=({config:t,instructions:e})=>(r,s)=>async n=>{t.isCustomEndpoint&&hr(s,"ENDPOINT_OVERRIDE","N");const i=await tn(n.input,{getEndpointParameterInstructions(){return e}},{...t},s);s.endpointV2=i,s.authSchemes=i.properties?.authSchemes;const a=s.authSchemes?.[0];if(a){s.signing_region=a.signingRegion,s.signing_service=a.signingName;const c=F(s)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return r({...n})},nn={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:or.name},Ti=(t,e)=>({applyToStack:r=>{r.addRelativeTo(sn({config:t,instructions:e}),nn)}}),vi=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:s,useFipsEndpoint:n}=t,i=r!=null?async()=>$t(await $(r)()):void 0,o=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:$(s??!1),useFipsEndpoint:$(n??!1)});let c;return o.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=Ot(t.serviceId)),c),o};var M;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(M||(M={}));const ve=3,Ai=M.STANDARD,an=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],on=["TimeoutError","RequestTimeout","RequestTimeoutException"],cn=[500,502,503,504],un=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],dn=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],ln=t=>t?.$retryable!==void 0,hn=t=>t.$metadata?.clockSkewCorrected,fn=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},kt=t=>t.$metadata?.httpStatusCode===429||an.includes(t.name)||t.$retryable?.throttling==!0,ke=(t,e=0)=>ln(t)||hn(t)||on.includes(t.name)||un.includes(t?.code||"")||dn.includes(t?.code||"")||cn.includes(t.$metadata?.httpStatusCode||0)||fn(t)||t.cause!==void 0&&e<=10&&ke(t.cause,e+1),mn=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!ke(t)}return!1};class Pe{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(s=>Pe.setTimeoutFn(s,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),kt(e)){const n=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=n,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(n),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const s=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(s)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const s=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(s*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Ae=100,Pt=20*1e3,pn=500,et=500,gn=5,yn=10,wn=1,Sn="amz-sdk-invocation-id",bn="amz-sdk-request",En=()=>{let t=Ae;return{computeNextBackoffDelay:s=>Math.floor(Math.min(Pt,Math.random()*2**s*t)),setDelayBase:s=>{t=s}}},tt=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(Pt,t),getRetryCost:()=>r});class _t{maxAttempts;mode=M.STANDARD;capacity=et;retryBackoffStrategy=En();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return tt({retryDelay:Ae,retryCount:0})}async refreshRetryTokenForRetry(e,r){const s=await this.getMaxAttempts();if(this.shouldRetry(e,r,s)){const n=r.errorType;this.retryBackoffStrategy.setDelayBase(n==="THROTTLING"?pn:Ae);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),a=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,o=this.getCapacityCost(n);return this.capacity-=o,tt({retryDelay:a,retryCount:e.getRetryCount()+1,retryCost:o})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(et,this.capacity+(e.getRetryCost()??wn))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${ve}`),ve}}shouldRetry(e,r,s){return e.getRetryCount()+1<s&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?yn:gn}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class Rn{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=M.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;const{rateLimiter:s}=r??{};this.rateLimiter=s??new Pe,this.standardRetryStrategy=new _t(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}class X{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new X({...e,headers:{...e.headers}});return r.query&&(r.query=Tn(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return X.clone(this)}}function Tn(t){return Object.keys(t).reduce((e,r)=>{const s=t[r];return{...e,[r]:Array.isArray(s)?[...s]:s}},{})}class vn{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const An=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Ci=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:s}=t,n=$(s??ve);return Object.assign(t,{maxAttempts:n,retryStrategy:async()=>e||(await $(r)()===M.ADAPTIVE?new Rn(n):new _t(n))})},Cn=t=>t?.body instanceof ReadableStream,In=t=>(e,r)=>async s=>{let n=await t.retryStrategy();const i=await t.maxAttempts();if(On(n)){n=n;let a=await n.acquireInitialRetryToken(r.partition_id),o=new Error,c=0,d=0;const{request:f}=s,u=X.isInstance(f);for(u&&(f.headers[Sn]=Wt());;)try{u&&(f.headers[bn]=`attempt=${c+1}; max=${i}`);const{response:l,output:h}=await e(s);return n.recordSuccess(a),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=d,{response:l,output:h}}catch(l){const h=$n(l);if(o=An(l),u&&Cn(f))throw(r.logger instanceof rr?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),o;try{a=await n.refreshRetryTokenForRetry(a,h)}catch{throw o.$metadata||(o.$metadata={}),o.$metadata.attempts=c+1,o.$metadata.totalRetryDelay=d,o}c=a.getRetryCount();const p=a.getRetryDelay();d+=p,await new Promise(g=>setTimeout(g,p))}}else return n=n,n?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",n.mode]]),n.retry(e,s)},On=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",$n=t=>{const e={error:t,errorType:kn(t)},r=_n(t.$response);return r&&(e.retryAfterHint=r),e},kn=t=>kt(t)?"THROTTLING":ke(t)?"TRANSIENT":mn(t)?"SERVER_ERROR":"CLIENT_ERROR",Pn={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ii=t=>({applyToStack:e=>{e.add(In(t),Pn)}}),_n=t=>{if(!vn.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],s=Number(r);return Number.isNaN(s)?new Date(r):new Date(s*1e3)};var Mt={name:"SHA-256"},rt={name:"HMAC",hash:Mt},Mn=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85]);const xn={};function W(){return typeof window<"u"?window:typeof self<"u"?self:xn}var Nn=(function(){function t(e){this.toHash=new Uint8Array(0),this.secret=e,this.reset()}return t.prototype.update=function(e){if(!_e(e)){var r=le(e),s=new Uint8Array(this.toHash.byteLength+r.byteLength);s.set(this.toHash,0),s.set(r,this.toHash.byteLength),this.toHash=s}},t.prototype.digest=function(){var e=this;return this.key?this.key.then(function(r){return W().crypto.subtle.sign(rt,r,e.toHash).then(function(s){return new Uint8Array(s)})}):_e(this.toHash)?Promise.resolve(Mn):Promise.resolve().then(function(){return W().crypto.subtle.digest(Mt,e.toHash)}).then(function(r){return Promise.resolve(new Uint8Array(r))})},t.prototype.reset=function(){var e=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(r,s){W().crypto.subtle.importKey("raw",le(e.secret),rt,!1,["sign"]).then(r,s)}),this.key.catch(function(){}))},t})(),Dn=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function Un(t){if(Ln(t)&&typeof t.crypto.subtle=="object"){var e=t.crypto.subtle;return Hn(e)}return!1}function Ln(t){if(typeof t=="object"&&typeof t.crypto=="object"){var e=t.crypto.getRandomValues;return typeof e=="function"}return!1}function Hn(t){return t&&Dn.every(function(e){return typeof t[e]=="function"})}var Oi=(function(){function t(e){Un(W())?this.hash=new Nn(e):this.hash=new Lt(e)}return t.prototype.update=function(e,r){this.hash.update(le(e))},t.prototype.digest=function(){return this.hash.digest()},t.prototype.reset=function(){this.hash.reset()},t})();const $i=({serviceId:t,clientVersion:e})=>async r=>{const s=typeof window<"u"?window.navigator:void 0,n=s?.userAgent??"",i=s?.userAgentData?.platform??st.os(n)??"other",a=void 0,o=s?.userAgentData?.brands??[],c=o[o.length-1],d=c?.brand??st.browser(n)??"unknown",f=c?.version??"unknown",u=[["aws-sdk-js",e],["ua","2.1"],[`os/${i}`,a],["lang/js"],["md/browser",`${d}_${f}`]];t&&u.push([`api/${t}`,e]);const l=await r?.userAgentAppId?.();return l&&u.push([`app/${l}`]),u},st={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}},ki=t=>()=>Promise.reject(t),zn=["in-region","cross-region","mobile","standard","legacy"],Pi=({defaultsMode:t}={})=>Ht(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(qn()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${zn.join(", ")}, got ${e}`)}}),qn=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:r,downlink:s}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(s)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1},_i=t=>({setRegion(e){t.region=e},region(){return t.region}}),Mi=t=>({region:t.region()});export{ni as $,ui as A,Si as B,Xt as C,Ai as D,ai as E,Qn as F,_i as G,Kn as H,Mi as I,Xn as J,ii as K,_ as L,Ci as M,at as N,Ei as O,fi as P,vi as Q,Gn as R,mi as S,A as T,yi as U,Vn as V,wi as W,Ii as X,Ri as Y,ri as Z,si as _,Fn as a,Yn as a0,Jn as a1,ti as a2,Zn as a3,U as a4,Qt as a5,b,Ne as c,gi as d,Wn as e,pi as f,Ti as g,ee as h,F as i,oi as j,Yr as k,ge as l,rr as m,ei as n,Pi as o,ye as p,Oi as q,li as r,ts as s,di as t,ki as u,Wt as v,ve as w,$i as x,hi as y,bi as z};
